var e,t,r=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(e,t,a)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&d(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&d(e,r,t[r]);return e},l=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},h=(e,t,r)=>(l(e,t,"read from private field"),r?r.call(e):t.get(e)),u=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},f=(e,t,r,a)=>(l(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r);class p{constructor(){this.startMarker=document.createTextNode(""),this.endMarker=document.createTextNode("")}static from(e,t){const r=new this;return e.before(r.startMarker),t.after(r.endMarker),r}before(...e){this.startMarker.before(...e)}prepend(...e){this.startMarker.after(...e)}append(...e){this.endMarker.before(...e)}after(...e){this.endMarker.after(...e)}remove(){const e=document.createRange();e.setStartBefore(this.startMarker),e.setEndAfter(this.endMarker),e.deleteContents()}replaceChildren(...e){const t=document.createRange();t.setStartAfter(this.startMarker),t.setEndBefore(this.endMarker),t.deleteContents(),this.startMarker.after(...e)}replaceWith(...e){this.endMarker.after(...e),this.remove()}get childNodes(){const e=[];for(let t=this.startMarker.nextSibling;t!=this.endMarker&&t;t=t.nextSibling)e.push(t);return e}get children(){return this.childNodes.filter((e=>e instanceof HTMLElement))}}var b=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",LiveFragment:p});const m=Symbol.for("bruh reactive");class v{constructor(r){u(this,e,void 0),u(this,t,void 0),this[m]=!0,f(this,e,r),f(this,t,new Set)}get value(){return h(this,e)}set value(t){if(t!==h(this,e))return f(this,e,t),this.wasUpdated(),t}wasUpdated(){for(const e of h(this,t))e()}react(e){return h(this,t).add(e),()=>h(this,t).delete(e)}}e=new WeakMap,t=new WeakMap;const y=(e,t)=>{e[m]?e.react((()=>t(e.value))):t(e)};var g=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Reactive:v,r:(e,t)=>{if(!t)return new v(e);const r=new v(t()),a=()=>r.value=t();for(const n of e)n.react(a);return r},reactiveDo:y});const M=(e,t)=>r=>{Array.isArray(r)?r.length?e(r[0]):t():e(r)};var S=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",pipe:(e,...t)=>t.reduce(((e,t)=>t(e)),e),dispatch:(e,t,r)=>e.dispatchEvent(new CustomEvent(t,c({bubbles:!0,cancelable:!0,composed:!0},r))),createDestructable:(e,t)=>{const r=(o=c({},e),s={[Symbol.iterator]:()=>t[Symbol.iterator]()},a(o,n(s)));var o,s;return Object.defineProperty(r,Symbol.iterator,{enumerable:!1}),r},maybeDo:M,functionAsObject:e=>new Proxy({},{get:(t,r)=>e(r)})});const w=Symbol.for("bruh reactive"),k=Symbol.for("bruh meta node"),O=Symbol.for("bruh meta text node"),T=Symbol.for("bruh meta element"),x=e=>e[k]?e.node:e instanceof Node?e:document.createTextNode(e),_=e=>e.flat(1/0).flatMap((e=>{if(!e[w])return[x(e)];if(Array.isArray(e.value)){const t=new p;return e.react((()=>{t.replaceChildren(..._(e.value))})),[t.startMarker,..._(e.value),t.endMarker]}let t=x(e.value);return e.react((()=>{const r=t;t=x(e.value),r.replaceWith(t)})),[t]}));class j{constructor(e){this[k]=this[O]=!0,e[w]?(this.node=document.createTextNode(e.value),e.react((()=>{this.node.textContent=e.value}))):this.node=document.createTextNode(e)}addProperties(e={}){return Object.assign(this.node,e),this}}class A{constructor(e,t){this[k]=this[T]=!0,this.node=t?document.createElementNS(t,e):document.createElement(e)}static from(e){const t=new this("div");return t.node=e,t}addProperties(e={}){return Object.assign(this.node,e),this}addAttributes(e={}){for(const t in e)y(e[t],M((e=>this.node.setAttribute(t,e)),(()=>this.node.removeAttribute(t))));return this}addDataAttributes(e={}){for(const t in e)y(e[t],M((e=>this.node.dataset[t]=e),(()=>delete this.node.dataset[t])));return this}before(...e){this.node.before(..._(e))}prepend(...e){this.node.prepend(..._(e))}append(...e){this.node.append(..._(e))}after(...e){this.node.after(..._(e))}replaceChildren(...e){this.node.replaceChildren(..._(e))}replaceWith(...e){this.node.replaceWith(..._(e))}}var N=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",childrenToNodes:_,MetaTextNode:j,MetaElement:A,hydrateTextNodes:()=>{const e={},t=document.getElementsByTagName("bruh-textnode");for(const r of t){const t=document.createTextNode(r.textContent);r.dataset.tag&&(e[r.dataset.tag]=t),r.replaceWith(t)}return e},t:e=>new j(e),e:(e,t)=>(...r)=>{const a=new A(e,t);if((null==(n=r[0])?void 0:n[k])||(null==n?void 0:n[w])||n instanceof Node||Array.isArray(n)||"function"!=typeof n)a.append(r);else{const[e,...t]=r;a.addAttributes(e),a.append(t)}var n;return a},h:(e,t,...r)=>{if("string"==typeof e){const a=new A(e);return a.addAttributes(t||{}),a.append(r),a}return e(Object.assign({},t,{children:r}))},JSXFragment:({children:e})=>e});export{N as dom,b as liveFragment,g as reactive,S as util};
//# sourceMappingURL=bruh.es.js.map
