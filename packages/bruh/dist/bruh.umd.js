var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__publicField=(e,t,r)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,r),r),__accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},__privateSet=(e,t,r,a)=>(__accessCheck(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),__privateMethod=(e,t,r)=>(__accessCheck(e,t,"access private method"),r);!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bruh={})}(this,(function(e){var t,r,a,i,o,n,s,d,_,p,c,l,h,u,f,v,b,m;class y{constructor(){__publicField(this,"startMarker",document.createTextNode("")),__publicField(this,"endMarker",document.createTextNode(""))}static from(e,t){const r=new this;return e.before(r.startMarker),t.after(r.endMarker),r}before(...e){this.startMarker.before(...e)}prepend(...e){this.startMarker.after(...e)}append(...e){this.endMarker.before(...e)}after(...e){this.endMarker.after(...e)}remove(){const e=document.createRange();e.setStartBefore(this.startMarker),e.setEndAfter(this.endMarker),e.deleteContents()}replaceChildren(...e){const t=document.createRange();t.setStartAfter(this.startMarker),t.setEndBefore(this.endMarker),t.deleteContents(),this.startMarker.after(...e)}replaceWith(...e){this.endMarker.after(...e),this.remove()}get childNodes(){const e=[];for(let t=this.startMarker.nextSibling;t!=this.endMarker&&t;t=t.nextSibling)e.push(t);return e}get children(){return this.childNodes.filter((e=>e instanceof HTMLElement))}}var g=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",LiveFragment:y});const M=Symbol.for("bruh reactive");t=M,r=new WeakMap,a=new WeakMap;const S=class{constructor(e,t){__privateAdd(this,h),__publicField(this,i,!0),__privateAdd(this,o,void 0),__privateAdd(this,n,new Set),__privateAdd(this,s,void 0),__privateAdd(this,d,0),__privateAdd(this,_,new Set),t?(__privateSet(this,o,t()),__privateSet(this,s,t),__privateSet(this,d,Math.max(...e.map((e=>__privateGet(e,d))))+1),e.forEach((e=>__privateGet(e,_).add(this)))):__privateSet(this,o,e)}get value(){return __privateGet(S,p).size&&S.applyUpdates(),__privateGet(this,o)}set value(e){0===__privateGet(this,d)&&(__privateGet(S,p).size||queueMicrotask(S.applyUpdates),__privateGet(S,p).set(this,e))}addReaction(e){return __privateGet(this,n).add(e),()=>__privateGet(this,n).delete(e)}static applyUpdates(){var e,t,r;if(__privateGet(S,p).size){for(const[t,r]of __privateGet(S,p).entries())__privateMethod(e=t,h,u).call(e,r);__privateGet(S,p).clear();for(const e of __privateGet(S,c))if(e)for(const a of e)__privateMethod(r=a,h,u).call(r,__privateGet(t=a,s).call(t));__privateGet(S,c).length=0;for(const e of __privateGet(S,l))e();__privateGet(S,l).length=0}}};let w=S;i=M,o=new WeakMap,n=new WeakMap,s=new WeakMap,d=new WeakMap,_=new WeakMap,p=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakSet,u=function(e){if(e===__privateGet(this,o))return;__privateSet(this,o,e),__privateGet(S,l).push(...__privateGet(this,n));const t=__privateGet(S,c);for(const r of __privateGet(this,_)){const e=__privateGet(r,d);t[e]||(t[e]=new Set),t[e].add(r)}},__privateAdd(w,p,new Map),__privateAdd(w,c,[]),__privateAdd(w,l,[]);const k=(e,t)=>{if(null==e?void 0:e[M])return t(e.value),e.addReaction((()=>t(e.value)));t(e)};var G=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SimpleReactive:class{constructor(e){__publicField(this,t,!0),__privateAdd(this,r,void 0),__privateAdd(this,a,new Set),__privateSet(this,r,e)}get value(){return __privateGet(this,r)}set value(e){if(e!==__privateGet(this,r)){__privateSet(this,r,e);for(const e of __privateGet(this,a))e()}}addReaction(e){return __privateGet(this,a).add(e),()=>__privateGet(this,a).delete(e)}},FunctionalReactive:w,r:(e,t)=>new w(e,t),reactiveDo:k});const P=(e,t)=>r=>{Array.isArray(r)?r.length?e(r[0]):t():e(r)};var A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",pipe:(e,...t)=>t.reduce(((e,t)=>t(e)),e),dispatch:(e,t,r)=>e.dispatchEvent(new CustomEvent(t,__spreadValues({bubbles:!0,cancelable:!0,composed:!0},r))),createDestructable:(e,t)=>{const r=__spreadProps(__spreadValues({},e),{[Symbol.iterator]:()=>t[Symbol.iterator]()});return Object.defineProperty(r,Symbol.iterator,{enumerable:!1}),r},maybeDo:P,functionAsObject:e=>new Proxy({},{get:(t,r)=>e(r)})});const O=Symbol.for("bruh reactive"),T=Symbol.for("bruh meta node"),N=Symbol.for("bruh meta element"),x=e=>e[T]?e.node:e instanceof Node?e:document.createTextNode(e),j=e=>e.flat(1/0).flatMap((e=>{if(!e[O])return[x(e)];if(Array.isArray(e.value)){const t=new y;return e.addReaction((()=>{t.replaceChildren(...j(e.value))})),[t.startMarker,...j(e.value),t.endMarker]}let t=x(e.value);return e.addReaction((()=>{const r=t;t=x(e.value),r.replaceWith(t)})),[t]}));class W{constructor(e){__publicField(this,f,!0),__publicField(this,v,!0),__publicField(this,"node"),e[O]?(this.node=document.createTextNode(e.value),e.addReaction((()=>{this.node.textContent=e.value}))):this.node=document.createTextNode(e)}addProperties(e={}){return Object.assign(this.node,e),this}}f=T,v=N;class C{constructor(e,t){__publicField(this,b,!0),__publicField(this,m,!0),__publicField(this,"node"),this.node=t?document.createElementNS(t,e):document.createElement(e)}static from(e){const t=new this("div");return t.node=e,t}addProperties(e={}){return Object.assign(this.node,e),this}addAttributes(e={}){for(const t in e)k(e[t],P((e=>this.node.setAttribute(t,e)),(()=>this.node.removeAttribute(t))));return this}addDataAttributes(e={}){for(const t in e)k(e[t],P((e=>this.node.dataset[t]=e),(()=>delete this.node.dataset[t])));return this}addStyles(e={}){for(const t in e)k(e[t],P((e=>this.node.style.setProperty(t,e)),(()=>this.node.style.removeProperty(t))));return this}toggleClasses(e={}){for(const t in e)k(e[t],(e=>this.node.classList.toggle(t,e)));return this}before(...e){this.node.before(...j(e))}prepend(...e){this.node.prepend(...j(e))}append(...e){this.node.append(...j(e))}after(...e){this.node.after(...j(e))}replaceChildren(...e){this.node.replaceChildren(...j(e))}replaceWith(...e){this.node.replaceWith(...j(e))}}b=T,m=N;var E=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",childrenToNodes:j,MetaTextNode:W,MetaElement:C,hydrateTextNodes:()=>{const e={},t=document.getElementsByTagName("bruh-textnode");for(const r of t){const t=document.createTextNode(r.textContent);r.dataset.tag&&(e[r.dataset.tag]=t),r.replaceWith(t)}return e},t:e=>new W(e),e:(e,t)=>(...r)=>{const a=new C(e,t);if((null==(i=r[0])?void 0:i[T])||(null==i?void 0:i[O])||i instanceof Node||Array.isArray(i)||"function"!=typeof i)a.append(r);else{const[e,...t]=r;a.addAttributes(e),a.append(t)}var i;return a},h:(e,t,...r)=>{if("string"==typeof e){const a=new C(e);return a.addAttributes(t||{}),a.append(r),a}return e(Object.assign({},t,{children:r}))},JSXFragment:({children:e})=>e});e.dom=E,e.liveFragment=g,e.reactive=G,e.util=A,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
//# sourceMappingURL=bruh.umd.js.map
